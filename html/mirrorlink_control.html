<head>
  <title>AriloSprinkler MirrorLink Control</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
<h1>AriloSprinkler MirrorLink Control Panel</h1>
<style> table, th, td { border: 0px solid black;  border-collapse: collapse;}
table#mlsr th { border: 1px solid black;}
table#mlsr td { border: 1px solid black; border-collapse: collapse;}</style>
<caption><b>Radio Status</caption><br><br>
<table cellspacing=4 id='mlsr'>
  <tr><td>Frequency&nbsp&nbsp</td><td>Local RSSI&nbsp&nbsp</td><td>Remote RSSI&nbsp&nbsp</td><td>Local SNR&nbsp&nbsp</td><td>Remote SNR&nbsp&nbsp</td><td>Link Status&nbsp&nbsp</td><td>Association Status&nbsp&nbsp</td><td>Association Attempts&nbsp&nbsp</td></tr>
  <tr><td>(Waiting...)</td></tr>
</table>
<br><br>
<style> table, th, td { border: 0px solid black;  border-collapse: collapse;}
table#mlsp th { border: 1px solid black;}
table#mlsp td { border: 1px solid black; border-collapse: collapse;}</style>
<caption><b>Packet Status</caption><br><br>
<table cellspacing=4 id='mlsp'>
  <tr><td>Buffered Packets&nbsp&nbsp</td><td>Packets Sent&nbsp&nbsp</td><td>Packets Received&nbsp&nbsp</td><td>Encryption&nbsp&nbsp</td><td>Packet Sent Time&nbsp&nbsp</td><td>No TX Time&nbsp&nbsp</td>
  <tr><td>(Waiting...)</td></tr>
</table>
<br><br>
<table cellspacing=16>
  <tr><td><input type='password' name='mlpass' id='mlpass' style='font-size:14pt;height:28px;'></td><td>MirrorLink Password</td></tr>
  <tr><td><input type='text' name='mlfreq' id='mlfreq' style='font-size:14pt;height:28px;'></td><td>MirrorLink Frequency</td></tr>
  <tr><td><input type='text' name='mlplim' id='mlplim' style='font-size:14pt;height:28px;'></td><td>MirrorLink Power Limit</td></tr>
  <tr><td><input type='checkbox' name='mlrem' id='mlrem' style='font-size:14pt;height:28px;'></td><td>MirrorLink Remote</td></tr>
  <tr><td colspan=2><p id='msg'></p></td></tr>
  <tr><td><button type='button' id='butt' onclick='ml();' style='height:36px;width:180px'>Submit</button></td><td></td></tr>
</table>
<script>
function id(s) {return document.getElementById(s);}
function ml() {
}
function showStatus() {
  var xhr=new XMLHttpRequest();
  xhr.onreadystatechange=function() {
    if(xhr.readyState==4 && xhr.status==200) {
      id('mlsr').deleteRow(1);
      var jd=JSON.parse(xhr.responseText);
      var row=id('mlsr').insertRow(-1);
      row.innerHTML ="<tr><td align='center'>("+jd.frequency+" MHz)</td>"  + "<td align='center'>("+jd.rssis[0]+" dbm)</td>" + "<td align='center'>("+jd.rssis[1] +" dbm)</td>" + "<td align='center'>("+jd.snrs[0] +" db)</td>" + "<td align='center'>("+jd.snrs[1] +" db)</td>" + "<td align='center'>("+jd.linkst +")</td>" + "<td align='center'>("+jd.assocst +")</td>" + "<td align='center'>("+jd.assocatm +")</td>" + "</tr>";
      id('mlsp').deleteRow(1);
      jd=JSON.parse(xhr.responseText);
      row=id('mlsp').insertRow(-1);
      row.innerHTML ="<tr><td align='center'>("+jd.buffpackets+")</td>"  + "<td align='center'>("+jd.packetstx+")</td>" + "<td align='center'>("+jd.packetsrx +")</td>" + "<td align='center'>("+jd.encryption +")</td>" + "<td align='center'>("+jd.packettime +" msec)</td>" + "<td align='center'>("+jd.notxtime +" sec)</td>" + "</tr>";
    };
  }
  xhr.open('GET','mlstatus',true); xhr.send();
}
setInterval(showStatus, 5000);
</script>
</body>
  